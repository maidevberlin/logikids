FROM oven/bun:1

WORKDIR /app

# Create workspace structure
COPY package.json .
COPY bun.lockb .

# Copy package.json files for workspace resolution
COPY packages/backend/package.json packages/backend/
COPY content/package.json content/

RUN bun install

# Copy source files
COPY content content
COPY packages/backend packages/backend

WORKDIR /app/packages/backend

EXPOSE 3000
CMD ["bun", "start"]
